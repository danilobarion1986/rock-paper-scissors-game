<!DOCTYPE html>
<html>
    <head>
        <title>Rock-Paper-Scissors game in Javascript</title>
        <link href="./style.css" type="text/css" rel="stylesheet">
        <meta charset="utf-8">

    </head>

<body>
    <h1>Rock Paper Scissors</h1>
    <p class = "subtitle">Pick your option<br>Get 5 points to win!</p>

    <div class="button-area">
    <button type="button" id = "rock">rock</button>
    <button type="button" id = "paper">paper</button>
    <button type="button" id = "scissors">scissors</button>
    </div>
    
    <div>
        <p class="resultado"><span id = "resultado"></span> </p>  
        <p class="placar"><span id = "userPoints"></span>   <span id = "pcPoints"></span> </p> 
    </div>

    <div>
        <p id = "placar-final"></p>
    </div>

   

    <script>
        //Generate computer random choice

        function pcRandom() {
            let pcChoice
            let random = Math.random()*10;
                        
            if (random < 3.3) {
                pcChoice = "rock";
            } else if (random > 6.6) {
                pcChoice = "paper";
            } else { pcChoice = "scissors"
            }
            return pcChoice;
        }

        // Get user click option -- Setup dos buttons

        document.getElementById("rock").addEventListener("click", getRock);
        document.getElementById("paper").addEventListener("click", getPaper);
        document.getElementById("scissors").addEventListener("click", getScissors);


        function getRock() {
            let userClick = document.getElementById("rock").innerText;
	        let pc = pcRandom();
	        playRound(userClick, pc);
}
        
        function getPaper(){
            let userClick = document.getElementById("paper").innerText;
            let pc = pcRandom();
            playRound(userClick,pc);
        }
        
        function getScissors(){
            let userClick = document.getElementById("scissors").innerText;
            let pc = pcRandom();
            playRound(userClick,pc);
        }

        //The game function - compare inputs (pc and user) and returns a result
        
        let userPoints = 0;
        let pcPoints = 0

        function playRound(A, B) {
				let result

                if(userPoints == 5 || pcPoints == 5){
                    userPoints = 0;
                    pcPoints = 0;
                    document.getElementById("placar-final").innerHTML ='';
                }


				if (A == B) {
                    result = "Draw. No winner...";
                } else if ((A == "paper" && B == "rock")||
                            (A == "rock" && B == "scissors")||
                            (A == "scissors" && B == "paper")) {
                            result = "You win: " + A + " beats " + B;
                            userPoints++;
                } else { 
                    result = "You lose: " + B + " beats " + A;
                    pcPoints++;
                }

                document.getElementById("resultado").innerHTML = result;
                document.getElementById("userPoints").innerHTML = "You: " + userPoints;
                document.getElementById("pcPoints").innerHTML = "CPU: " + pcPoints;
                
                if(userPoints == 5){
                    document.getElementById("placar-final").innerHTML = "You WIN!!";
                    document.getElementById("placar-final").style.display = "block";
                    document.getElementById("placar-final").style.backgroundColor = "lightseagreen";
                } else if (pcPoints == 5){
                    document.getElementById("placar-final").innerHTML = "L-O-S-E-R!";
                    document.getElementById("placar-final").style.display = "block";
                    document.getElementById("placar-final").style.backgroundColor = "crimson";
                } else {
                    document.getElementById("placar-final").style.display = "none";
                }

                return result
                }
        



    </script>
</body>


</html>